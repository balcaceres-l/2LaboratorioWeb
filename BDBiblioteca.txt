
CREATE DATABASE IF NOT EXISTS biblioteca;

CREATE EXTENSION IF NOT EXISTS "uuid-ossp";

CREATE TABLE IF NOT EXISTS autores (
    id_autor UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
    nombre VARCHAR(255) NOT NULL,
    correo VARCHAR(255) NOT NULL
);

CREATE TABLE IF NOT EXISTS categorias (
    id_categoria UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
    nombre_categoria VARCHAR(255) NOT NULL,
    clasificacion VARCHAR(100) NOT NULL
);
CREATE TABLE IF NOT EXISTS libros (
    id_libro UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
    titulo VARCHAR(500) NOT NULL CHECK (LENGTH(titulo) >= 10),
    anio_publicacion INTEGER NOT NULL CHECK (anio_publicacion > 1900),
    autor_id UUID REFERENCES autores(id_autor) ON DELETE SET NULL, 
    categoria_id UUID REFERENCES categorias(id_categoria) ON DELETE SET NULL  
);
